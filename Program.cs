using System;
using System.Diagnostics;

namespace Operations
{
    public class Program
    {
        public static LazyAsync<double> NoLinq7 { get { var r0 = RandomDouble();  var r1 = RandomDouble(r0.Result); var r2 = RandomDouble(r1.Result); var r3 = RandomDouble(r2.Result); var r4 = RandomDouble(r3.Result); var r5 = RandomDouble(r4.Result); var r6 = RandomDouble(r5.Result); var r7 = RandomDouble(r6.Result); return r7; } }
        public static LazyAsync<double> Linq7 { get { return from r0 in RandomDouble()  from r1 in RandomDouble(r0) from r2 in RandomDouble(r1) from r3 in RandomDouble(r2) from r4 in RandomDouble(r3) from r5 in RandomDouble(r4) from r6 in RandomDouble(r5) from r7 in RandomDouble(r6) select r7; } }

        public static LazyAsync<double> NoLinq150 { get { var r0 = RandomDouble();  var r1 = RandomDouble(r0.Result); var r2 = RandomDouble(r1.Result); var r3 = RandomDouble(r2.Result); var r4 = RandomDouble(r3.Result); var r5 = RandomDouble(r4.Result); var r6 = RandomDouble(r5.Result); var r7 = RandomDouble(r6.Result); var r8 = RandomDouble(r7.Result); var r9 = RandomDouble(r8.Result); var r10 = RandomDouble(r9.Result); var r11 = RandomDouble(r10.Result); var r12 = RandomDouble(r11.Result); var r13 = RandomDouble(r12.Result); var r14 = RandomDouble(r13.Result); var r15 = RandomDouble(r14.Result); var r16 = RandomDouble(r15.Result); var r17 = RandomDouble(r16.Result); var r18 = RandomDouble(r17.Result); var r19 = RandomDouble(r18.Result); var r20 = RandomDouble(r19.Result); var r21 = RandomDouble(r20.Result); var r22 = RandomDouble(r21.Result); var r23 = RandomDouble(r22.Result); var r24 = RandomDouble(r23.Result); var r25 = RandomDouble(r24.Result); var r26 = RandomDouble(r25.Result); var r27 = RandomDouble(r26.Result); var r28 = RandomDouble(r27.Result); var r29 = RandomDouble(r28.Result); var r30 = RandomDouble(r29.Result); var r31 = RandomDouble(r30.Result); var r32 = RandomDouble(r31.Result); var r33 = RandomDouble(r32.Result); var r34 = RandomDouble(r33.Result); var r35 = RandomDouble(r34.Result); var r36 = RandomDouble(r35.Result); var r37 = RandomDouble(r36.Result); var r38 = RandomDouble(r37.Result); var r39 = RandomDouble(r38.Result); var r40 = RandomDouble(r39.Result); var r41 = RandomDouble(r40.Result); var r42 = RandomDouble(r41.Result); var r43 = RandomDouble(r42.Result); var r44 = RandomDouble(r43.Result); var r45 = RandomDouble(r44.Result); var r46 = RandomDouble(r45.Result); var r47 = RandomDouble(r46.Result); var r48 = RandomDouble(r47.Result); var r49 = RandomDouble(r48.Result); var r50 = RandomDouble(r49.Result); var r51 = RandomDouble(r50.Result); var r52 = RandomDouble(r51.Result); var r53 = RandomDouble(r52.Result); var r54 = RandomDouble(r53.Result); var r55 = RandomDouble(r54.Result); var r56 = RandomDouble(r55.Result); var r57 = RandomDouble(r56.Result); var r58 = RandomDouble(r57.Result); var r59 = RandomDouble(r58.Result); var r60 = RandomDouble(r59.Result); var r61 = RandomDouble(r60.Result); var r62 = RandomDouble(r61.Result); var r63 = RandomDouble(r62.Result); var r64 = RandomDouble(r63.Result); var r65 = RandomDouble(r64.Result); var r66 = RandomDouble(r65.Result); var r67 = RandomDouble(r66.Result); var r68 = RandomDouble(r67.Result); var r69 = RandomDouble(r68.Result); var r70 = RandomDouble(r69.Result); var r71 = RandomDouble(r70.Result); var r72 = RandomDouble(r71.Result); var r73 = RandomDouble(r72.Result); var r74 = RandomDouble(r73.Result); var r75 = RandomDouble(r74.Result); var r76 = RandomDouble(r75.Result); var r77 = RandomDouble(r76.Result); var r78 = RandomDouble(r77.Result); var r79 = RandomDouble(r78.Result); var r80 = RandomDouble(r79.Result); var r81 = RandomDouble(r80.Result); var r82 = RandomDouble(r81.Result); var r83 = RandomDouble(r82.Result); var r84 = RandomDouble(r83.Result); var r85 = RandomDouble(r84.Result); var r86 = RandomDouble(r85.Result); var r87 = RandomDouble(r86.Result); var r88 = RandomDouble(r87.Result); var r89 = RandomDouble(r88.Result); var r90 = RandomDouble(r89.Result); var r91 = RandomDouble(r90.Result); var r92 = RandomDouble(r91.Result); var r93 = RandomDouble(r92.Result); var r94 = RandomDouble(r93.Result); var r95 = RandomDouble(r94.Result); var r96 = RandomDouble(r95.Result); var r97 = RandomDouble(r96.Result); var r98 = RandomDouble(r97.Result); var r99 = RandomDouble(r98.Result); var r100 = RandomDouble(r99.Result); var r101 = RandomDouble(r100.Result); var r102 = RandomDouble(r101.Result); var r103 = RandomDouble(r102.Result); var r104 = RandomDouble(r103.Result); var r105 = RandomDouble(r104.Result); var r106 = RandomDouble(r105.Result); var r107 = RandomDouble(r106.Result); var r108 = RandomDouble(r107.Result); var r109 = RandomDouble(r108.Result); var r110 = RandomDouble(r109.Result); var r111 = RandomDouble(r110.Result); var r112 = RandomDouble(r111.Result); var r113 = RandomDouble(r112.Result); var r114 = RandomDouble(r113.Result); var r115 = RandomDouble(r114.Result); var r116 = RandomDouble(r115.Result); var r117 = RandomDouble(r116.Result); var r118 = RandomDouble(r117.Result); var r119 = RandomDouble(r118.Result); var r120 = RandomDouble(r119.Result); var r121 = RandomDouble(r120.Result); var r122 = RandomDouble(r121.Result); var r123 = RandomDouble(r122.Result); var r124 = RandomDouble(r123.Result); var r125 = RandomDouble(r124.Result); var r126 = RandomDouble(r125.Result); var r127 = RandomDouble(r126.Result); var r128 = RandomDouble(r127.Result); var r129 = RandomDouble(r128.Result); var r130 = RandomDouble(r129.Result); var r131 = RandomDouble(r130.Result); var r132 = RandomDouble(r131.Result); var r133 = RandomDouble(r132.Result); var r134 = RandomDouble(r133.Result); var r135 = RandomDouble(r134.Result); var r136 = RandomDouble(r135.Result); var r137 = RandomDouble(r136.Result); var r138 = RandomDouble(r137.Result); var r139 = RandomDouble(r138.Result); var r140 = RandomDouble(r139.Result); var r141 = RandomDouble(r140.Result); var r142 = RandomDouble(r141.Result); var r143 = RandomDouble(r142.Result); var r144 = RandomDouble(r143.Result); var r145 = RandomDouble(r144.Result); var r146 = RandomDouble(r145.Result); var r147 = RandomDouble(r146.Result); var r148 = RandomDouble(r147.Result); var r149 = RandomDouble(r148.Result); var r150 = RandomDouble(r149.Result); return r150; } }
        public static LazyAsync<double> Linq150 { get { return from r0 in RandomDouble()  from r1 in RandomDouble(r0) from r2 in RandomDouble(r1) from r3 in RandomDouble(r2) from r4 in RandomDouble(r3) from r5 in RandomDouble(r4) from r6 in RandomDouble(r5) from r7 in RandomDouble(r6) from r8 in RandomDouble(r7) from r9 in RandomDouble(r8) from r10 in RandomDouble(r9) from r11 in RandomDouble(r10) from r12 in RandomDouble(r11) from r13 in RandomDouble(r12) from r14 in RandomDouble(r13) from r15 in RandomDouble(r14) from r16 in RandomDouble(r15) from r17 in RandomDouble(r16) from r18 in RandomDouble(r17) from r19 in RandomDouble(r18) from r20 in RandomDouble(r19) from r21 in RandomDouble(r20) from r22 in RandomDouble(r21) from r23 in RandomDouble(r22) from r24 in RandomDouble(r23) from r25 in RandomDouble(r24) from r26 in RandomDouble(r25) from r27 in RandomDouble(r26) from r28 in RandomDouble(r27) from r29 in RandomDouble(r28) from r30 in RandomDouble(r29) from r31 in RandomDouble(r30) from r32 in RandomDouble(r31) from r33 in RandomDouble(r32) from r34 in RandomDouble(r33) from r35 in RandomDouble(r34) from r36 in RandomDouble(r35) from r37 in RandomDouble(r36) from r38 in RandomDouble(r37) from r39 in RandomDouble(r38) from r40 in RandomDouble(r39) from r41 in RandomDouble(r40) from r42 in RandomDouble(r41) from r43 in RandomDouble(r42) from r44 in RandomDouble(r43) from r45 in RandomDouble(r44) from r46 in RandomDouble(r45) from r47 in RandomDouble(r46) from r48 in RandomDouble(r47) from r49 in RandomDouble(r48) from r50 in RandomDouble(r49) from r51 in RandomDouble(r50) from r52 in RandomDouble(r51) from r53 in RandomDouble(r52) from r54 in RandomDouble(r53) from r55 in RandomDouble(r54) from r56 in RandomDouble(r55) from r57 in RandomDouble(r56) from r58 in RandomDouble(r57) from r59 in RandomDouble(r58) from r60 in RandomDouble(r59) from r61 in RandomDouble(r60) from r62 in RandomDouble(r61) from r63 in RandomDouble(r62) from r64 in RandomDouble(r63) from r65 in RandomDouble(r64) from r66 in RandomDouble(r65) from r67 in RandomDouble(r66) from r68 in RandomDouble(r67) from r69 in RandomDouble(r68) from r70 in RandomDouble(r69) from r71 in RandomDouble(r70) from r72 in RandomDouble(r71) from r73 in RandomDouble(r72) from r74 in RandomDouble(r73) from r75 in RandomDouble(r74) from r76 in RandomDouble(r75) from r77 in RandomDouble(r76) from r78 in RandomDouble(r77) from r79 in RandomDouble(r78) from r80 in RandomDouble(r79) from r81 in RandomDouble(r80) from r82 in RandomDouble(r81) from r83 in RandomDouble(r82) from r84 in RandomDouble(r83) from r85 in RandomDouble(r84) from r86 in RandomDouble(r85) from r87 in RandomDouble(r86) from r88 in RandomDouble(r87) from r89 in RandomDouble(r88) from r90 in RandomDouble(r89) from r91 in RandomDouble(r90) from r92 in RandomDouble(r91) from r93 in RandomDouble(r92) from r94 in RandomDouble(r93) from r95 in RandomDouble(r94) from r96 in RandomDouble(r95) from r97 in RandomDouble(r96) from r98 in RandomDouble(r97) from r99 in RandomDouble(r98) from r100 in RandomDouble(r99) from r101 in RandomDouble(r100) from r102 in RandomDouble(r101) from r103 in RandomDouble(r102) from r104 in RandomDouble(r103) from r105 in RandomDouble(r104) from r106 in RandomDouble(r105) from r107 in RandomDouble(r106) from r108 in RandomDouble(r107) from r109 in RandomDouble(r108) from r110 in RandomDouble(r109) from r111 in RandomDouble(r110) from r112 in RandomDouble(r111) from r113 in RandomDouble(r112) from r114 in RandomDouble(r113) from r115 in RandomDouble(r114) from r116 in RandomDouble(r115) from r117 in RandomDouble(r116) from r118 in RandomDouble(r117) from r119 in RandomDouble(r118) from r120 in RandomDouble(r119) from r121 in RandomDouble(r120) from r122 in RandomDouble(r121) from r123 in RandomDouble(r122) from r124 in RandomDouble(r123) from r125 in RandomDouble(r124) from r126 in RandomDouble(r125) from r127 in RandomDouble(r126) from r128 in RandomDouble(r127) from r129 in RandomDouble(r128) from r130 in RandomDouble(r129) from r131 in RandomDouble(r130) from r132 in RandomDouble(r131) from r133 in RandomDouble(r132) from r134 in RandomDouble(r133) from r135 in RandomDouble(r134) from r136 in RandomDouble(r135) from r137 in RandomDouble(r136) from r138 in RandomDouble(r137) from r139 in RandomDouble(r138) from r140 in RandomDouble(r139) from r141 in RandomDouble(r140) from r142 in RandomDouble(r141) from r143 in RandomDouble(r142) from r144 in RandomDouble(r143) from r145 in RandomDouble(r144) from r146 in RandomDouble(r145) from r147 in RandomDouble(r146) from r148 in RandomDouble(r147) from r149 in RandomDouble(r148) from r150 in RandomDouble(r149) select r150; } }

        public static LazyAsync<double> RandomDouble(double seed = 0)
        {
            return new LazyAsync<double>(()
                => GetRandomDouble(
                    (seed != 0) ? (int)seed * 100 : DateTime.Now.Millisecond));
        }

        public static double GetRandomDouble(int seed)
        {
            var random = new Random(seed);
            var result = random.NextDouble();
            //Console.WriteLine($"{nameof(GetRandomDouble)} gets called: {result}");
            return result;
        }

        public static void MeasureOperation<T>(
            Func<LazyAsync<T>> getOperation,
            string queryName)
        {
            var swBldt = new Stopwatch();
            var swExec = new Stopwatch();

            Console.WriteLine($"Measuring query {queryName}");
            Console.WriteLine("Building the operation...");
            swBldt.Start();
            var operation = getOperation();
            swBldt.Stop();

            Console.WriteLine("Executing the operation...");
            swExec.Start();
            var result = operation.Result;
            swExec.Stop();

            //Console.WriteLine($"Operation Result: {operation.Result}");
            Console.WriteLine($"Build time {swBldt.ElapsedTicks}, {swBldt.ElapsedMilliseconds}");
            Console.WriteLine($"Exctn time {swExec.ElapsedTicks}, {swExec.ElapsedMilliseconds}");
            Console.WriteLine();
            Console.WriteLine();
        }

        public static void Main(string[] args)
        {
            MeasureOperation<double>(() => Linq150, nameof(Linq150));
            // MeasureOperation<double>(() => NoLinq150, nameof(NoLinq150));
            // MeasureOperation<double>(
            //     () => BigQuery.ReallyBigQuery, nameof(NoLinq150));
        }
    }
}
